"use strict";const e=require("./common/vendor.js"),t=require("./static/js/utils.js");if(!Array){(e.resolveComponent("uni-col")+e.resolveComponent("uni-row")+e.resolveComponent("nut-button")+e.resolveComponent("nut-dialog"))()}Math||((()=>"./uni_modules/uni-row/components/uni-col/uni-col.js")+(()=>"./uni_modules/uni-row/components/uni-row/uni-row.js")+(()=>"./uni_modules/sky-nutui/components/sky-nutui/packages/__VUE/button/index.js")+i+(()=>"./uni_modules/sky-nutui/components/sky-nutui/packages/__VUE/dialog/index.js"))();const i=()=>"./pages/component/time/CountDown.js",n={__name:"Meeting",props:["item"],setup(i){const n=i,o=e.inject("uploadType");function s(e){if("2"==e.isUploadImg&&"已结束"==e.onState&&"审核通过"==e.auditStatus&&e.userId==t.useGlobal.getCache("user").ID)return!0}const a=e.ref(!0),u=e.ref(!1),l=()=>{u.value=!0},m=i=>{o(1),e.index.showLoading({title:"请稍候"}),e.index.request({url:t.useGlobal.serverUrl+t.useGlobal.apiPath.meet_img,data:{makeMeetId:i},success:i=>(e.index.hideLoading(),1!=i.data.Code?e.index.showToast({title:"图片获取失败",icon:"error"}):null==i.data.Data?e.index.showToast({title:"暂无图片",icon:"success"}):void function(i){for(let[e,n]of i.entries())i[e]=t.useGlobal.serverUrl+n;e.index.previewImage({urls:i,longPressActions:{itemList:["发送给朋友","保存图片","收藏"]}})}(i.data.Data))})};return(r,d)=>{return e.e({a:e.t(i.item.mName),b:e.t(i.item.onState),c:e.p({span:12}),d:e.t(i.item.name),e:e.p({span:12}),f:e.t(e.unref(t.useGlobal).handleMakeMeetTime(i.item.startTime,i.item.endTime)),g:e.p({span:24}),h:e.t(i.item.auditStatus),i:(c=i.item.auditStatus,"审核不通过"==c?"red":"审核通过"==c?"green":"待审核"==c?"blue":void 0),j:e.p({span:10}),k:s(i.item)},s(i.item)?{l:e.o((s=>{return a=i.item.id,o(1),void e.index.chooseImage({count:3,sourceType:["album"],success:i=>{e.index.showLoading({title:"请稍候"});const s=i.tempFilePaths;let u=[];for(let[n,l]of s.entries())e.index.uploadFile({url:t.useGlobal.serverUrl+t.useGlobal.apiPath.createMakeMeetImg,filePath:l,name:"file",formData:{makeMeetId:a,createId:t.useGlobal.getCache("user").ID},success:e=>{let t=JSON.parse(e.data);u.push(t.Data),o(2)}});setTimeout((function(){e.index.hideLoading(),s.length==u.length&&(e.index.showToast({title:"上传成功",icon:"success"}),n.item.isUploadImg=1)}),5e3)}});var a})),m:e.p({size:"mini",type:"primary",icon:"photograph",block:!0})}:{},{n:"1"==i.item.isUploadImg},"1"==i.item.isUploadImg?{o:e.o((e=>m(i.item.id))),p:e.p({size:"mini",type:"info",icon:"image",block:!0})}:{},{q:"已结束"!=i.item.onState&&"审核不通过"!=i.item.auditStatus},"已结束"!=i.item.onState&&"审核不通过"!=i.item.auditStatus?{r:i.item.id,s:e.p({countDownTime:i.item.endTime})}:{},{t:"审核不通过"==i.item.auditStatus},"审核不通过"==i.item.auditStatus?{v:e.o(l),w:e.p({type:"default",size:"mini",block:!0}),x:e.o((e=>u.value=e)),y:e.p({noCancelBtn:a.value,noOkBtn:a.value,closeOnClickOverlay:a.value,title:"未通过原因",content:i.item.auditRefuse,visible:u.value})}:{},{z:e.p({span:14})});var c}}};exports._sfc_main=n;
