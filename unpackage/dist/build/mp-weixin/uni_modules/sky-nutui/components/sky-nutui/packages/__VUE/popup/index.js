"use strict";const e=require("../../../../../../../common/vendor.js"),o=require("./use-lock-scroll.js"),l=require("../overlay/props.js"),n=require("../../utils/create/component.js");require("../../locale/index.js"),require("../../locale/lang/zh-CN.js"),require("../../locale/lang/baseLang.js"),require("../../locale/lang/en-US.js"),require("../../utils/util.js");const i=()=>"../overlay/index.js",t=()=>"../icon/index.js",{componentName:s,create:a}=n.createComponent("popup");let c=2e3;const r={...l.overlayProps,position:{type:String,default:"center"},transition:String,style:{type:Object},popStyle:{type:Object},popClass:{type:String,default:""},closeable:{type:Boolean,default:!1},closeIconPosition:{type:String,default:"top-right"},closeIcon:{type:String,default:"close"},destroyOnClose:{type:Boolean,default:!0},teleport:{type:[String],default:"body"},overlay:{type:Boolean,default:!0},round:{type:Boolean,default:!1},isWrapTeleport:{type:Boolean,default:!1},safeAreaInsetBottom:{type:Boolean,default:!1}},p=a({components:{[i.name]:i,[t.name]:t},props:{...r},emits:["click","click-close-icon","open","close","opend","closed","update:visible","click-overlay"],options:{virtualHost:!0},setup(l,{emit:n}){const i=e.inject("lockPage",(e=>{}),!1),t=e.ref(),a=e.reactive({zIndex:l.zIndex,showSlot:!0,transitionName:`popup-fade-${l.position}`,slideTransitionName:`nut-slide-${l.position}`,overLayCount:1,keepAlive:!1,closed:l.closeable}),r=e.ref(!1),[p,d]=o.useLockScroll((()=>l.lockScroll)),u=e.computed((()=>({[s]:!0,round:l.round,[`popup-${l.position}`]:!0,[`popup-${l.position}--safebottom`]:"bottom"===l.position&&l.safeAreaInsetBottom,[l.popClass]:!0,[`${a.slideTransitionName}In`]:r.value,[`${a.slideTransitionName}Out`]:!r.value}))),v=e.computed((()=>({zIndex:a.zIndex,animationDuration:l.duration?`${l.duration}s`:"initial",...l.popStyle}))),y=()=>{2e3!=l.zIndex&&(c=Number(l.zIndex)),r.value=!0,n("update:visible",!0),i(!0),a.zIndex=++c,l.destroyOnClose&&(a.showSlot=!0),n("open")},C=()=>{i(!1),r.value=!1,setTimeout((()=>{n("update:visible",!1)}),1e3*+l.duration),l.destroyOnClose&&setTimeout((()=>{a.showSlot=!1,n("close")}),1e3*+l.duration)};return e.onMounted((()=>{l.transition?a.transitionName=l.transition:a.transitionName=`popup-slide-${l.position}`,l.visible&&y()})),e.onBeforeUnmount((()=>{l.visible&&C()})),e.onBeforeMount((()=>{l.visible&&d()})),e.onActivated((()=>{a.keepAlive&&(n("update:visible",!0),a.keepAlive=!1)})),e.onDeactivated((()=>{l.visible&&(C(),a.keepAlive=!0)})),e.watch((()=>l.visible),(e=>{e?y():C()})),e.watch((()=>l.position),(e=>{a.transitionName="center"===e?"popup-fade":`popup-slide-${e}`})),e.watch((()=>l.closeable),(e=>{a.closed=e})),{...e.toRefs(a),popStyle:v,classes:u,onClick:e=>{n("click",e)},onClickCloseIcon:e=>{n("click-close-icon",e),C()},onClickOverlay:e=>{l.closeOnClickOverlay&&(n("click-overlay",e),C())},onOpened:e=>{n("opend",e)},onClosed:e=>{n("closed",e)},popupRef:t}}});if(!Array){(e.resolveComponent("nut-overlay")+e.resolveComponent("nut-icon")+e.resolveComponent("Transition"))()}Math||((()=>"../overlay/index.js")+(()=>"../icon/index.js"))();const d=e._export_sfc(p,[["render",function(o,l,n,i,t,s){return e.e({a:o.isWrapTeleport},o.isWrapTeleport?e.e({b:o.overlay},o.overlay?{c:e.o(o.onClickOverlay),d:e.p({visible:o.visible,"close-on-click-overlay":o.closeOnClickOverlay,overlayClass:o.overlayClass,overlayStyle:o.overlayStyle,"z-index":o.zIndex,"lock-scroll":o.lockScroll,duration:o.duration})}:{},{e:o.showSlot},(o.showSlot,{}),{f:o.closed},o.closed?{g:e.p({name:o.closeIcon,size:"12px"}),h:e.o(((...e)=>o.onClickCloseIcon&&o.onClickCloseIcon(...e))),i:e.n("nutui-popup__close-icon--"+o.closeIconPosition)}:{},{j:o.visible,k:e.n(o.classes),l:e.s(o.popStyle),m:e.o(((...e)=>o.onClick&&o.onClick(...e))),n:e.o(o.onOpened),o:e.o(o.onClosed),p:e.p({name:o.transitionName})}):e.e({q:o.overlay},o.overlay?{r:e.o(o.onClickOverlay),s:e.p({visible:o.visible,"close-on-click-overlay":o.closeOnClickOverlay,overlayClass:o.overlayClass,overlayStyle:o.overlayStyle,"z-index":o.zIndex,"lock-scroll":o.lockScroll,duration:o.duration})}:{},{t:o.showSlot},(o.showSlot,{}),{v:o.closed},o.closed?{w:e.p({name:o.closeIcon,size:"12px"}),x:e.o(((...e)=>o.onClickCloseIcon&&o.onClickCloseIcon(...e))),y:e.n("nutui-popup__close-icon--"+o.closeIconPosition)}:{},{z:o.visible,A:e.n(o.classes),B:e.s(o.popStyle),C:e.o(((...e)=>o.onClick&&o.onClick(...e))),D:e.o(o.onOpened),E:e.o(o.onClosed),F:e.p({name:o.transitionName})}))}]]);wx.createComponent(d);
